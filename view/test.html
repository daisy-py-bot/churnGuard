


function applyFilters() {
    // Get the values from the filter inputs
    const nameSearch = document.getElementById('name-search').value.trim().toLowerCase();
    const statusFilter = document.getElementById('status-filter').value;
    const riskFilter = document.getElementById('risk-level-filter').value;
    const locationFilter = document.getElementById('location-filter').value;
    const accountFilter = document.getElementById('account-filter').value;

    console.log("Filters applied:");
    console.log("Name:", nameSearch);
    console.log("Account Status:", statusFilter);
    console.log("Risk Level:", riskFilter);
    console.log("Location:", locationFilter);
    console.log("Account Type:", accountFilter);

    // Example: Filter the customer data (assuming `customerData` is your dataset)
    const filteredData = customerData.filter(customer => {
        return (
            (!nameSearch || customer.name.toLowerCase().includes(nameSearch)) &&
            (!statusFilter || customer.status.toLowerCase() === statusFilter) &&
            (!riskFilter || customer.risk.toLowerCase() === riskFilter.toLowerCase()) &&
            (!locationFilter || customer.location.toLowerCase() === locationFilter.toLowerCase()) &&
            (!accountFilter || customer.accountType.toLowerCase() === accountFilter.toLowerCase())
        );
    });

    // Call a function to update the table with the filtered data
    populateCustomerTable(filteredData);
}








<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Distribution Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>// Assume groupedData is already aggregated from your database
    const groupedData = [
        { location: 'Zimbabwe', count: 50, averageChurn: 0.85, lat: -19.0154, lng: 29.1549 },
        { location: 'USA', count: 200, averageChurn: 0.3, lat: 37.0902, lng: -95.7129 },
        { location: 'Ghana', count: 120, averageChurn: 0.6, lat: 7.9465, lng: -1.0232 }
    ];
    
    // Function to determine the color based on average churn
    const getColor = (averageChurn) => {
        if (averageChurn > 0.7) return 'red'; // High Risk
        if (averageChurn > 0.4) return 'yellow'; // Medium Risk
        return 'green'; // Low Risk
    };
    
    // Initialize the map
    const map = L.map('map').setView([20, 0], 2);  // Zoom and center the map
    
    // Add OpenStreetMap tile layer to the map
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    // Loop through each location and create a circle marker
    groupedData.forEach(data => {
        const color = getColor(data.averageChurn);
    
        L.circleMarker([data.lat, data.lng], {
            radius: 12,
            fillColor: color,
            color: color,
            weight: 2,
            opacity: 1,
            fillOpacity: 0.7
        })
        .bindPopup(`
            <b>Location: ${data.location}</b><br>
            Number of Customers: ${data.count}<br>
            Average Churn Prediction: ${(data.averageChurn * 100).toFixed(2)}%<br>
            Risk Category: ${data.averageChurn > 0.7 ? 'High Risk' : (data.averageChurn > 0.4 ? 'Medium Risk' : 'Low Risk')}
        `)
        .addTo(map);
    });
    
</script>

</body>
</html>
